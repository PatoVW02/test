import { useState } from "react"
import { db } from 'auth/FirebaseAuth';
import {
	Form,
	Input,
	Button,
	Radio,
	Select,
	Cascader,
	DatePicker,
	InputNumber,
	TreeSelect,
	Switch,
	Modal
  } from 'antd';

export const ModalEditarDireccion = (record) => {
	const [visible, setVisible] = useState(false)
	const [componentSize, setComponentSize] = useState('small')
	const [calle, setCalle] = useState(record.calle_y_numero)
	const [coloniaInt, setColoniaInt] = useState(record.colonia)
	const [codigoPostal, setCodigoPostal] = useState(record.codigo_postal)
	const [ciudadInt, setCiudadInt] = useState(record.ciudad)
	const [estadoInt, setEstadoInt] = useState(record.estado)
	// const [formLayout, setFormLayout] = useState('vertical')
	// const [form] = Form.useForm();

	const showModal = () => {
		setVisible(true)
	}

	const handleCancel = () => {
		setVisible(false)
		setCalle(record.calle_y_numero)
		setColoniaInt(record.colonia)
		setCodigoPostal(record.codigo_postal)
		setCiudadInt(record.ciudad)
		setEstadoInt(record.estado)
	}

	const handleOK = (record) => {
		setVisible(false)
		db.collection('ordenes').doc(record.id).update({ calle_y_numero: calle, colonia: coloniaInt, codigo_postal: codigoPostal, ciudad: ciudadInt, estado: estadoInt })
	}

    const handleChange = e => {
        console.log(e.target.value)
		console.log(e)
    }

	// const onFormLayoutChange = ({ size }) => {
	// 	setComponentSize(size)
	// }

	// const formItemLayout = 
	// 	formLayout === 'vertical'
	// 		? {
	// 			labelCol: { span: 4 },
	// 			wrapperCol: { span: 14 },
	// 		  }
	// 		: null;

	// const buttonItemLayout =
	// 			formLayout === 'vertical'
	// 				? {
	// 					wrapperCol: { span: 14, offset: 4 },
	// 				  }
	// 				: null;

	console.log(calle)

	return (
		<div>
            <Button type="primary" onClick={showModal}>Cambiar</Button>
            <div>
                <Modal
                    title="Editar Direccion"
                    visible={visible}
                    onCancel={handleCancel}
                    style={{
                        top: 20,
                    }}
                    footer={[
                        <Button 
                            key="cancelar" 
                            onClick={handleCancel}
                        danger>
                            <span>Cancelar</span>
                        </Button>,
                        <Button 
                            key="imprimirGuia" 
                            onClick={() => handleOK(record)}
                            type='primary'
                        >
                            <span>Confirmar Cambios</span>
                        </Button>
                    ]}
                >
					<Form
						labelCol={{ span: 4 }}
						wrapperCol={{ span: 14 }}
						layout="horizontal"
						initialValues={{ size: componentSize }}
						// onValuesChange={onFormLayoutChange}
						size={componentSize}
					>
						{/* <Form.Item label="Form Size" name="size">
						<Radio.Group>
							<Radio.Button value="small">Small</Radio.Button>
							<Radio.Button value="middle">Middle</Radio.Button>
							<Radio.Button value="large">Large</Radio.Button>
						</Radio.Group>
						</Form.Item> */}
						<Form.Item label="Calle">
						<Input defaultValue={calle} onChange={e => setCalle(e.target.value)}/>
						</Form.Item>
						<Form.Item label="Colonia">
						<Input defaultValue={coloniaInt} onChange={e => setColoniaInt(e.target.value)}/>
						</Form.Item>
						<Form.Item label="Codigo Postal">
						<InputNumber defaultValue={codigoPostal} onChange={e => setCodigoPostal(e.target.value)}/>
						</Form.Item>
						<Form.Item label="Ciudad">
						<Input defaultValue={ciudadInt} onChange={e => setCiudadInt(e.target.value)}/>
						</Form.Item>
						<Form.Item label="Estado">
						<Input defaultValue={estadoInt} onChange={e => setEstadoInt(e.target.value)}/>
						</Form.Item>
						<Form.Item label="Pais">
						<Select defaultValue={record.pais} onChange={handleChange}>
							<Select.Option value="MX">Mexico</Select.Option>
							<Select.Option value="US">Estados Unidos</Select.Option>
							<Select.Option value="CA">Canada</Select.Option>
						</Select>
						</Form.Item>
						<Form.Item label="Referencias">
						<Input />
						</Form.Item>
					</Form>
                </Modal>
            </div>
        </div>
	)
}